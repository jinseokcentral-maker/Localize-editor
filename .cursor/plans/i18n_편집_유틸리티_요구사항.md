# i18n 번역 에디터 특화 유틸리티 요구사항

## 목표
단순한 셀 편집이 아닌, **i18n 번역 작업에 특화된 편집 유틸리티** 제공

## Excel vs i18n 번역 에디터 차이점

### Excel의 특징
- 자유로운 셀 편집
- 수식 및 계산
- 셀 간 연관성 없음
- 데이터 분석 중심

### i18n 번역 에디터가 필요한 특징
- **키 기반 구조**: 각 행은 하나의 번역 키 (예: `common.buttons.submit`)
- **다국어 동시 관리**: 같은 키에 대해 여러 언어 번역을 한 화면에서 관리
- **컨텍스트 정보**: 번역가가 올바른 번역을 하기 위한 컨텍스트 제공
- **번역 상태 추적**: 어떤 언어의 어떤 키가 번역되었는지 추적
- **번역 일관성**: 같은 패턴의 키에 대해 일관된 번역 유지
- **빠른 작업 흐름**: 번역가가 빠르게 번역할 수 있는 UX

## 필수 기능 목록

### 1. 스마트 편집 유틸리티

#### 1.1 향상된 키보드 네비게이션
- **Tab**: 다음 편집 가능한 셀(언어 컬럼)로 이동
- **Shift+Tab**: 이전 편집 가능한 셀로 이동
- **Enter**: 저장 후 아래 행의 같은 언어 셀로 이동
- **Shift+Enter**: 저장 후 위 행의 같은 언어 셀로 이동
- **Arrow keys**: 셀 내에서 텍스트 편집 중 이동, 편집 모드가 아니면 셀 간 이동
- **Esc**: 편집 취소

#### 1.2 자동 포커스 및 워크플로우
- 편집 완료 후 자동으로 다음 번역 필요한 셀로 이동 옵션
- 번역 누락된 셀만 순회하는 모드 (Translation Mode)
- 기본 언어(예: en)와 나란히 비교하면서 번역하기 편한 레이아웃

#### 1.3 복사/붙여넣기 유틸리티
- **키 패턴 복사**: 같은 키 패턴(예: `common.buttons.*`)의 다른 행들에 빠르게 복사
- **다중 선택**: 여러 행을 선택하여 일괄 복사/붙여넣기
- **언어 전체 복사**: 한 언어의 모든 번역을 다른 언어로 복사 (예: en → ko 전체 복사)

### 2. 번역 상태 시각화

#### 2.1 번역 완료/미완료 상태
- 빈 번역 셀 하이라이트 (빨간 테두리 또는 배경색)
- 번역 완료된 셀 표시 (체크마크 또는 배경색)
- 부분 번역 상태 표시 (일부 언어만 번역됨)

#### 2.2 번역 품질 힌트
- 기본 언어와 길이 차이 표시 (너무 짧거나 길면 경고)
- 번역 일관성 경고 (비슷한 키에 다른 번역 패턴 감지)

#### 2.3 컨텍스트 정보 표시/편집
- Context 컬럼을 항상 보이도록 고정 (pinned left)
- Context 셀 편집 지원 (번역가가 추가 정보 입력 가능)
- Context가 없는 키에 대해 경고 표시

### 3. 번역 도움 기능

#### 3.1 빠른 참조
- 기본 언어(예: en) 컬럼을 항상 표시하고 고정
- 번역 중인 언어와 기본 언어를 나란히 비교하기 쉬운 레이아웃
- 키 패턴 그룹화 표시 (예: `common.buttons.*` 그룹)

#### 3.2 번역 힌트 (향후 확장)
- 이전 번역 힌트 표시 (비슷한 키의 이전 번역 제안)
- 자동 번역 제안 (API 연동 시)

### 4. 필터링 및 검색 유틸리티

#### 4.1 번역 상태별 필터링
- 번역 완료된 항목만 보기
- 번역 누락된 항목만 보기
- 부분 번역된 항목만 보기

#### 4.2 키/값 검색
- 키 패턴 검색 (예: `common.buttons.*`)
- 값 검색 (특정 번역 텍스트 검색)
- 정규식 검색 지원

#### 4.3 언어별 필터링
- 특정 언어가 비어있는 항목만 보기
- 특정 언어에서 검색

### 5. 일괄 작업 유틸리티

#### 5.1 일괄 편집
- 선택한 여러 행의 특정 언어를 같은 값으로 채우기
- 키 패턴 기반 일괄 편집
- 빈 번역을 기본 언어 값으로 자동 채우기 옵션

#### 5.2 키 관리
- 키 이름 변경 (선택적, 모든 언어에 영향 없음)
- 키 삭제 확인

### 6. 변경사항 추적 및 관리

#### 6.1 변경사항 표시
- 변경된 셀 시각적 표시 (노란색 또는 특별한 배경색)
- 변경사항 요약 (몇 개의 키가 몇 개의 언어에서 변경됨)
- 변경사항 타임라인

#### 6.2 되돌리기/다시하기
- 셀 단위 되돌리기 (Ctrl+Z)
- 행 단위 되돌리기
- 전체 변경사항 초기화

#### 6.3 변경사항 내보내기
- 변경된 항목만 JSON으로 내보내기
- 변경 이력 로그

## 구현 우선순위

### Phase 1: 기본 편집 유틸리티 (Step 3)
1. ✅ 향상된 키보드 네비게이션 (Tab, Enter, Arrow keys)
2. ✅ 셀 편집 이벤트 처리 및 콜백
3. ✅ 변경사항 추적 (dirty cells)
4. ✅ 빈 번역 셀 하이라이트
5. ✅ Context 컬럼 고정 및 편집

### Phase 2: 번역 상태 및 시각화 (Step 3 확장 또는 Step 4)
6. 번역 완료/미완료 상태 표시
7. 번역 상태별 필터링
8. 번역 품질 힌트

### Phase 3: 검색 및 필터링 (기존 Step 4-5)
9. 키/값 검색 (이미 계획됨)
10. 번역 상태별 필터링

### Phase 4: 일괄 작업 (Step 6-7 확장)
11. 복사/붙여넣기 유틸리티
12. 일괄 편집
13. 변경사항 관리 (이미 계획됨)

## Step 3 재정의

### Step 3: i18n 편집 유틸리티 (TDD)

기존 "셀 편집 기능"에서 **"i18n 편집 유틸리티"**로 확장:

#### 3.1 [RED] 테스트 작성
- 향상된 키보드 네비게이션 테스트
- 셀 편집 이벤트 및 콜백 테스트
- 변경사항 추적 테스트
- 빈 번역 셀 하이라이트 테스트
- Context 편집 테스트
- 읽기 전용 모드 테스트

#### 3.2 [GREEN] 구현
- AG Grid 셀 에디터 설정
- onCellValueChanged 이벤트 핸들러
- 커스텀 키보드 네비게이션 핸들러
- 변경사항 추적 (dirty cells)
- 셀 스타일링 (빈 번역, 변경된 셀)
- Context 컬럼 편집 지원

#### 3.3 검사
- 키보드 동작 확인
- 번역 작업 흐름 확인
- 성능 확인 (< 16ms 반응 시간)

